{
    "name": "terraform-playground",
    "build": {
        "dockerfile": "./Dockerfile",
        "args": {
            "-t": "local/terraform-playground"
        },
        "context": "."
    },
    "runArgs": [
        "--name=dev-terraform",
        "--hostname=terraform"
    ],
    "initializeCommand": "bash ./.devcontainer/scripts/initialize-command.sh",
    // "remoteEnv": {
    //     "PATH": "${containerEnv:PATH}:/home/vscode/.local/bin"
    // },
    "features": {
        "ghcr.io/devcontainers/features/common-utils:2": {
            "installZsh": "false",
            "configureZshAsDefaultShell": "false",
            "username": "vscode",
            "userUid": "1000",
            "userGid": "1000",
            "upgradePackages": "true"
        }
        //"ghcr.io/devcontainers/features/docker-in-docker": {}
    },
    "customizations": {
        "vscode": {
            "settings": {
                "telemetry.telemetryLevel": "off",
                "files.eol": "\n",
                "files.insertFinalNewline": true,
                "files.autoSave": "off",
                "editor.formatOnSave": true,
                "git.autorefresh": true,
                "git.autofetch": true,
                "git.autofetchPeriod": 90,
                "git.pullTags": false,
                "git.confirmSync": false
            },
            "extensions": [
                "sleistner.vscode-fileutils",
                "esbenp.prettier-vscode",
                "yzhang.markdown-all-in-one",
                "HashiCorp.terraform"
            ]
        }
    },
    "remoteUser": "vscode",
    "onCreateCommand": "bash ./.devcontainer/scripts/on-create-command.sh",
    "mounts": [
        {
            "source": "devcontainer-history",
            "target": "/home/vscode/.history_export",
            "type": "volume"
        }
    ],
    "postCreateCommand": "bash ./.devcontainer/scripts/post-create-command.sh"
}
